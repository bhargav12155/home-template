files:
  "/etc/nginx/conf.d/cors.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      location ~* \.(jpg|jpeg|png|gif|ico|css|js|pdf|mp4|webm|mov)$ {
          add_header Access-Control-Allow-Origin *;
          add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
          add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Authorization";
          
          if ($request_method = 'OPTIONS') {
              add_header Access-Control-Allow-Origin *;
              add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
              add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Authorization";
              add_header Access-Control-Max-Age 86400;
              add_header Content-Length 0;
              add_header Content-Type text/plain;
              return 200;
          }
      }

container_commands:
  01_reload_nginx:
    command: "service nginx reload"
